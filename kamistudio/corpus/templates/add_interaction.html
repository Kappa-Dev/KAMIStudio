{% extends "new_base.html" %}

{% block title %}Add interaction{% endblock %}

{% block panel%}
  <div class="row">
    <div class="col-md-12">
    <h2 class="mb-6 kb-action-brand"><a href="{{ url_for('corpus.corpus_view', corpus_id=corpus._id) }}">{{ corpus.annotation.name }}</a> / New interaction</h2>
    </div>
  </div>
{% endblock %}

{% block inner_workspace %}
      <h2 class="mb-6">Interaction type</h2>
      <form id="interactionForm" novalidate action="{{ url_for('corpus.add_interaction', corpus_id=corpus._id) }}" method="post"> 

          <div class="mb-3">
            <input type="radio" onchange="switchToMod(this)" name="modorbnd" value="mod" checked> Modification
          </div>

          <div class="mb-3">
            <input type="radio" onchange="switchToBnd(this)" name="modorbnd" value="bnd"> Binding
          </div>

          <div class="row">
            <div class="col-md-12">
              <hr class="mb-4">
            </div>
          </div>

          <div class="row form-row" style="margin-bottom: 20px;">
            <div class="col-md-4 mb-3">
              <div id="invalidFeedbackGlobal" class="invalid-feedback" style="display: none;">
                Input to some fields is invalid.
              </div>
            </div>
            <div class="col-md-4 mb-3">
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <label for="interactionDesc">Description</label>
              <input type="text" class="form-control" name="interactionDesc" id="interactionDesc" placeholder="Description of the new interaction" value="">
            </div>
            <div class="col-md-2">
              <label for="biRate">Bimolecular rate</label>
              <div class="info-tooltip" style="position: relative;">
                <span class="glyphicon glyphicon-question-sign"></span>
                <span class="tooltiptext">A bimolecular stochastic rate constant in s<sup>-1</sup>mol<sup>n-1</sup></span>
               </div> 
              <input type="text" class="form-control" name="biRate" id="biRate" placeholder="" value="">
            </div>
          </div>

          <!-- MODIFICATION FORM STARTS HERE -->
          <div id="mod">


            <div class="row form-row">
              <div class="col-md-4 mb-3">
                <h3 class="mb-3">New modification interaction</h3>
              </div>
              <div class="col-md-4 mb-3">
                <label for="modType">Type of modification:</label>
                <select onchange="switchModType(this)" class="form-control" name="modType" id="modTypeSelection">
                  <option name="modType" id="Modification" value="Modification">Default</option>
                  <option name="modType" id="AnonymousModification" value="AnonymousModification">Anonymous</option>
                  <option name="modType" id="SelfModification" value="SelfModification">Self modification</option>
                  <option name="modType" id="LigandModification" value="LigandModification">Ligand modification</option>
                </select>
              </div>
            </div>


            <!-- ENZYME FORM -->
            <div id="enzymeBlock" class="form-block">

              <div class="mb-3">
                <h4 class="mb-3">Enzyme</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="enzymeUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" name="enzymeUniprotAC" id="enzymeUniprotAC" placeholder="" value="" required>
                    <div class="invalid-feedback" style="display: none;">
                      UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="enzymeHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="enzymeHgncSymbol" id="enzymeHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                
                <div class="col-md-4 mb-3">
                    <label for="enzymeSynonyms">Synonyms</label>
                    <input type="text" class="form-control" name="enzymeSynonyms" id="enzymeSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                      <label for="enzymeLocation">Location</label>
                      <input type="text" class="form-control" name="enzymeLocation" id="enzymeLocation" placeholder="" value="">
                </div>

              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="enzymeRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'enzyme', false, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="enzymeSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'enzyme', 'enzyme', false, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="enzymeResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'enzyme')" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="enzymeStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'enzyme')" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF ENZYME FORM -->


            <!-- SUBSTRATE FORM -->
            <div id="substrateBlock" class="form-block">

              <div class="mb-3">
                <h4 class="mb-3">Substrate</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="substrateUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" name="substrateUniprotAC"  id="substrateUniprotAC" placeholder="" value="" required>
                    <div class="invalid-feedback" style="display: none;">
                      UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="substrateHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="substrateHgncSymbol"  id="substrateHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                
                <div class="col-md-4 mb-3">
                    <label for="substrateSynonyms">Synonyms</label>
                    <input type="text" class="form-control" name="substrateSynonyms"  id="substrateSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                      <label for="substrateLocation">Location</label>
                      <input type="text" class="form-control" name="substrateLocation" id="substrateLocation" placeholder="" value="">
                </div>

              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="substrateRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'substrate', true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="substrateSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'substrate', 'substrate', true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="substrateResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'substrate', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="substrateStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'substrate', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF SUBSTRATE FORM -->

            <!-- ENZYMATIC SUBSTRATE FORM -->
            <div id="enzimaticSubstrateBlock" class="form-block" style="display: none">
                <div class="mb-3">
                  <h4 class="mb-3">Enzyme/Substrate</h4>
                </div>

                <div class="row form-row">
                    <div class="col-md-4 mb-3">
                      <label for="enzymeSubUniprotAC">UniProt AC*</label>
                      <input type="text" class="form-control" name="enzymeSubUniprotAC" id="enzymeSubUniprotAC" placeholder="" value="">
                      <div class="invalid-feedback" style="display: none;">
                        UniProt acession number is required.
                      </div>
                    </div>
                    <div class="col-md-4 mb-3">
                      <label for="enzymeSubHgncSymbol">HGNC Symbol</label>
                      <input type="text" class="form-control" name="enzymeSubHgncSymbol" id="enzymeSubHgncSymbol" placeholder="" value="">
                    </div>
                </div>
                  
                <div class="row form-row">
                  
                  <div class="col-md-4 mb-3">
                      <label for="enzymeSubSynonyms">Synonyms</label>
                      <input type="text" class="form-control" name="enzymeSubSynonyms" placeholder="" value="">
                  </div>
                  <div class="col-md-4 mb-3">
                        <label for="enzymeSubLocation">Location</label>
                        <input type="text" class="form-control" name="enzymeSubLocation" placeholder="" value="">
                  </div>

                </div>

                <div class="row">
                  <div class="col-md-12">
                    <hr class="mb-4">
                  </div>
                </div>

                <div class="row form-row">
                  <div class="col-md-2 mb-3">
                    <label>Regions</label>
                  </div>
                  <div class="col-md-10 mb-3">
                    <!-- enzyme region addition form will go here-->
                    <div id="enzymeSubRegionFormFather"></div>
                    <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'enzymeSub', true, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <hr class="mb-4">
                  </div>
                </div>

                <div class="row form-row">
                  <div class="col-md-2 mb-3">
                    <label>Sites</label>
                  </div>
                  <div class="col-md-10 mb-3">
                    <!-- enzyme site addition form will go here-->
                    <div id="enzymeSubSiteFormFather"></div>
                    <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'enzymeSub', 'enzymeSub', true, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <hr class="mb-4">
                  </div>
                </div>

                <div class="row form-row">
                  <div class="col-md-2 mb-3">
                    <label>Residues</label>
                  </div>
                  <div class="col-md-10 mb-3">
                    <!-- enzyme residue addition form will go here-->
                    <div id="enzymeSubResidueFormFather"></div>
                    <a type="button" onclick="addNewResidueForm(this, 'enzymeSub', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-12">
                    <hr class="mb-4">
                  </div>
                </div>

                <div class="row form-row">
                  <div class="col-md-2 mb-3">
                    <label>States</label>
                  </div>
                  <div class="col-md-10 mb-3">
                    <!-- enzyme state addition form will go here-->
                    <div id="enzymeSubStateFormFather"></div>
                    <a type="button" onclick="addNewStateForm(this, 'enzymeSub', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                  </div>
                </div>

            </div>
            <!-- END OF ENZYMATIC SUBSTRATE FORM -->
              

            <!-- ENZYME-LIGAND FORM -->
            <div id="enzymeLigandBlock" class="form-block" style="display: none;">

              <div class="mb-3">
                <h4 class="mb-3">Enzyme</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="enzymeLigandUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" name="enzymeLigandUniprotAC" id="enzymeLigandUniprotAC" placeholder="" value="">
                    <div class="invalid-feedback" style="display: none;">
                      UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="enzymeLigandHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="enzymeLigandHgncSymbol" id="enzymeLigandHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                
                <div class="col-md-4 mb-3">
                    <label for="enzymeLigandSynonyms">Synonyms</label>
                    <input type="text" class="form-control" name="enzymeLigandSynonyms" id="enzymeLigandSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                      <label for="enzymeLigandLocation">Location</label>
                      <input type="text" class="form-control" name="enzymeLigandLocation" id="enzymeLigandLocation" placeholder="" value="">
                </div>

              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="enzymeLigandRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'enzymeLigand', false, true, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="enzymeLigandSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'enzymeLigand', 'enzymeLigand', false, true, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="enzymeLigandResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'enzymeLigand')" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="enzymeLigandStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'enzymeLigand')" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF ENZYME LIGAND FORM -->

            <!-- SUBSTRATE LIGAND FORM -->
            <div id="substrateLigandBlock" class="form-block" style="display: none;">

              <div class="mb-3">
                <h4 class="mb-3">Substrate</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="substrateLigandUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" name="substrateLigandUniprotAC"  id="substrateLigandUniprotAC" placeholder="" value="">
                    <div class="invalid-feedback" style="display: none;">
                      UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="substrateLigandHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="substrateLigandHgncSymbol"  id="substrateLigandHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                
                <div class="col-md-4 mb-3">
                    <label for="substrateLigandSynonyms">Synonyms</label>
                    <input type="text" class="form-control" name="substrateLigandSynonyms"  id="substrateLigandSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                      <label for="substrateLigandLocation">Location</label>
                      <input type="text" class="form-control" name="substrateLigandLocation" id="substrateLigandLocation" placeholder="" value="">
                </div>

              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="substrateLigandRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'substrateLigand', true, false, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="substrateLigandSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'substrateLigand', 'substrateLigand', true, false, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="substrateLigandResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'substrateLigand', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="substrateLigandStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'substrateLigand', true)" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF SUBSTRATE LIGAND FOR -->

            <!-- MODIFICATION TARGET FORM -->
            <div id="modificationTargetBlock" class="form-block">

              <div class="mb-3">
                <h4 class="mb-3">Modification target</h4>
              </div>

              <div id="inputTarget">

                <div class="mb-3">
                     <input type="radio" onchange="switchToStateTarget(this)" name="stateOrResidue" value="state" checked> State <input type="radio" onchange="switchToResidueTarget(this)" name="stateOrResidue" value="residue"> Residue
                </div>

                <div class="form-block nested-form" id="targetResidueForm" style="display: none;">
                  <div class="row">
                    <div class="col-md-3">
                      <label for="targetResidueAA">Amino acid</label>
                      <input type="text" class="form-control" name="targetResidueAA"  id="targetResidueAA" placeholder="" value="">
                      <div class="invalid-feedback" style="display: none;">
                        Target key residue amino acid is required.
                      </div>
                    </div>

                    <div class="col-md-2">
                      <label for="'targetResidueLocation">Location</label>
                      <input type="text" class="form-control" name="targetResidueLocation" id="targetResidueLocation" placeholder="" value="">
                    </div>
                    <div class="col-md-3">
                      <label for="targetResidueTest">Test</label><br>
                      <input type="radio" value="true" name="targetResidueTest" id="targetResidueTest" checked/> True<br>
                      <input type="radio" value="false" name="targetResidueTest" id="targetResidueTest"/> False
                    </div>
                  </div>

                  <div class="row ">
                    <div class="col-md-2 mb-3">
                      <label>State</label>
                    </div>
                    <div class="col-md-10 mb-3">
                      <div class="form-block nested-form" id="targetResidueStateForm">
                        <div class="row">
                          <div class="col-md-4">
                            <label for="targetResidueStateName">Name</label>
                            <input type="text" class="form-control" name="targetResidueStateName" id="targetResidueStateName" placeholder="" value="">
                            <div class="invalid-feedback" style="display: none;">
                              Target residue state name is required.
                            </div>
                          </div>
                          <div class="col-md-4">
                                <label for="targetResidueStateSet">Set</label><br>
                                <input type="radio" value="true" name="targetResidueStateSet" checked/> True<br>
                                <input type="radio" value="false" name="targetResidueStateSet"/> False
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="form-block nested-form" id="targetStateForm">
                  <div class="row">
                    <div class="col-md-4">
                      <label for="targetStateName">Name</label>
                      <input type="text" class="form-control" name="targetStateName" id="targetStateName" placeholder="" value="" required>
                      <div class="invalid-feedback" style="display: none;">
                        Target state name is required.
                      </div>
                    </div>
                    <div class="col-md-4">
                          <label for="targetStateSet">Set</label><br>
                          <input type="radio" value="true" name="targetStateSet" checked/> True<br>
                          <input type="radio" value="false" name="targetStateSet"/> False
                    </div>
                  </div>
                </div>

              </div>
              
              <div id="predefinedTarget"></div>
            </div>
            <!-- END OF MODIFICATION TARGET FORM -->


          </div>
          <!-- END OF MODIFICATION FORM -->


          <!-- BINDING FORM -->
          <div id="bnd" style="display:none">

             <div class="row form-row">
              <div class="col-md-4 mb-3">
                <h3 class="mb-3">New binding interaction</h3>
              </div>
              <div class="col-md-4 mb-3"></div>
            </div>

            <!-- LEFT FORM -->
            <div id="leftBlock" class="form-block">

              <div class="mb-3">
                <h4 class="mb-3">Left Partner</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="leftUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" id="leftUniprotAC" name="leftUniprotAC" placeholder="" value="">
                    <div class="invalid-feedback" style="display: none;">
                        UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="leftHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="leftHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                <div class="col-md-4 mb-3">
                  <label for="leftSynonyms">Synonyms</label>
                  <input type="text" class="form-control" name="leftSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                  <label for="leftLocation">Location</label>
                  <input type="text" class="form-control" name="leftLocation" placeholder="" value="">
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="leftRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'left', false, false, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="leftSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'left', 'left', false, false, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="leftResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'left')" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="leftStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'left')" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF LEFT FORM -->

            <!-- RIGHT FORM -->
            <div id="rightBlock" class="form-block">

              <div class="mb-3">
                <h4 class="mb-3">Right Partner</h4>
              </div>

              <div class="row form-row">
                  <div class="col-md-4 mb-3">
                    <label for="rightUniprotAC">UniProt AC*</label>
                    <input type="text" class="form-control" name="rightUniprotAC" id="rightUniprotAC" placeholder="" value="">
                    <div class="invalid-feedback" style="display: none;">
                      UniProt acession number is required.
                    </div>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label for="rightHgncSymbol">HGNC Symbol</label>
                    <input type="text" class="form-control" name="rightHgncSymbol" id="rightHgncSymbol" placeholder="" value="">
                  </div>
              </div>
              
              <div class="row form-row">
                
                <div class="col-md-4 mb-3">
                    <label for="rightSynonyms">Synonyms</label>
                    <input type="text" class="form-control" name="rightSynonyms" id="rightSynonyms" placeholder="" value="">
                </div>
                <div class="col-md-4 mb-3">
                      <label for="rightLocation">Location</label>
                      <input type="text" class="form-control" name="rightLocation" id="rightLocation" placeholder="" value="">
                </div>

              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Regions</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme region addition form will go here-->
                  <div id="rightRegionFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-region" onclick="addNewRegionForm(this, 'right', false, false, true)"><span class="glyphicon glyphicon-plus"></span> Add region</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Sites</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme site addition form will go here-->
                  <div id="rightSiteFormFather"></div>
                  <a type="button" class="btn btn-default btn-md panel-button add-button add-enzyme-site" onclick="addNewSiteForm(this, 'right', 'right' false, false, true)"><span class="glyphicon glyphicon-plus"></span> Add site</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>Residues</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme residue addition form will go here-->
                  <div id="rightResidueFormFather"></div>
                  <a type="button" onclick="addNewResidueForm(this, 'right')" class="btn btn-default btn-md panel-button add-button add-enzyme-residue"><span class="glyphicon glyphicon-plus"></span> Add residue</a>
                </div>
              </div>

              <div class="row">
                <div class="col-md-12">
                  <hr class="mb-4">
                </div>
              </div>

              <div class="row form-row">
                <div class="col-md-2 mb-3">
                  <label>States</label>
                </div>
                <div class="col-md-10 mb-3">
                  <!-- enzyme state addition form will go here-->
                  <div id="rightStateFormFather"></div>
                  <a type="button" onclick="addNewStateForm(this, 'right')" class="btn btn-default btn-md panel-button add-button add-enzyme-state"><span class="glyphicon glyphicon-plus"></span> Add state</a>
                </div>
              </div>

            </div>
            <!-- END OF RIGHT FORM -->

          <!-- END OF BINDING FORM -->
          </div>

          <!-- SUBMITTING BUTTTONS -->
          <div class="row form-row">
            <div class="col-md-6 mb-6">
              <a type="button" id="cancelInteractionButton" class="btn btn-default btn-lg" href="{{ url_for('corpus.corpus_view', corpus_id=corpus._id) }}">Cancel</a> 
            </div>
            <div class="col-md-6 mb-6" id="buttons" style="text-align: right;">
              <button type="button" id="previewBuggetButton" class="btn btn-primary btn-lg" onclick="checkAndSubmitForNuggetGeneration(this, '{{ url_for('corpus.preview_nugget', corpus_id=corpus._id) }}')">Nugget preview</button>
              <a type="button" id="submitInteraction" class="btn btn-primary btn-lg" onclick="checkAndSubmit(this)"  {% if  readonly %} disabled {% endif %}><span class="glyphicon glyphicon-ok edit-sign"></span> Add to the corpus</a>
            </div>
          </div>

      </form>

{% endblock %}


{% block custom_scripts %}
<script src="{{ url_for('corpus.static', filename='js/addInteraction.js') }}" type="text/javascript"></script>
{% endblock %}
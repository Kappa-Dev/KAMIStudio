{% extends "knowledge_base.html" %}

{% block action_buttons %}
    <div class="kb-action-buttons">
        <a href="{{ url_for('corpus.add_interaction', corpus_id=kb_id) }}" type="button" class="btn btn-default btn-md panel-button add-interaction-button"><span class="glyphicon glyphicon-plus"></span> Add interaction</a>
        <button type="button" class="btn btn-default btn-md panel-button add-interaction-button"><span class="glyphicon glyphicon-import" value="Choose Files!"></span> Import interactions</button>
        <a href="{{ url_for('corpus.download_corpus', corpus_id=kb_id) }}" type="button" class="btn btn-default btn-md panel-button add-interaction-button"><span class="glyphicon glyphicon-download-alt"></span> Export JSON</a>
        <a href="{{ url_for('corpus.delete_corpus', corpus_id=kb_id) }}" type="button" class="btn btn-primary btn-md panel-button"><span class="glyphicon glyphicon-remove"></span> Delete</a>
    </div>
{% endblock %}


{% block sidebar_items %}
	<h2 class="mb-6 kb-action-brand">Corpus overview</h2>
	<div class="highlighted-item" id="corpusData"></div>
{% endblock %}


{% block no_nuggets_message %}
 	Corpus does not contain any nuggets
{% endblock %}


{% block definitions_tab %}
	<li class="nav-item">
	  <a class="nav-link" data-toggle="tab" href="#definitions" role="tab">Protein definitions ({% if kb.empty() %}0{% else %}{{ n_definitons }}{% endif %})</a>
	</li>
{% endblock %}

{% block definitions_pane %}
	<div class="tab-pane" id="definitions" role="tabpanel">
	  {% if n_definitons == 0  %}
	      Corpus does not contain any protein definitions
	  {% else %}
	      <!-- Definitions list column -->
	      <div class="col-sm-6">
	          <div class="row">
	            <div class="col-sm-12">
	              <h3>Definitions</h3>
	            </div>
	          </div>
	          <div id="definitionView"></div>
	      </div>
	      <!-- End of nugget list column -->
	      <!-- Definition preview column -->
	      <div class="col-sm-6">
	        <div class="row">

	        </div>
	        <div id="definitionViewWidget"></div>
	      </div>
	      <!-- End of definition preview column -->
	    </div>
	  {% endif %}
	</div>
{% endblock %}

{% block info_boxes_rendering %}
  <script type="text/babel">
    if (document.getElementById('graphInfoBoxes')) {
      ReactDOM.render(
        [<ElementInfoBox id="graphElement" items={[]}/>,
         <MetaDataBox id="metaData" items={[]}/>],
        document.getElementById('graphInfoBoxes')
      );
    }
    ReactDOM.render(
      [<CorpusDataBox 
      {% if kb.annotation.name %}
          kbName='{{kb.annotation.name}}'
      {% endif %}
      {% if kb.annotation.desc %}
          desc='{{kb.annotation.desc}}'
      {% endif %}
      {% if kb.annotation.organism %}
          organism='{{kb.annotation.organism}}'
      {% endif %}
          creation_time='{{kb.creation_time}}'
          last_modified='{{kb.last_modified}}'
          onDataUpdate={handleModelUpdate('{{ kb._id }}')}
          genes='{{ genes }}' 
          bindings='{{ bindings }}'
          modifications='{{ modifications }}'
         />],
      document.getElementById('corpusData')
    );

    renderNuggetList('{{kb_id}}', '{{nuggets|safe}}');
    renderDefinitionList('{{kb_id}}', '{{definitions|safe}}');
  </script>
{% endblock %}
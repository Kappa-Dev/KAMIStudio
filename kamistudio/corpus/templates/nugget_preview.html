{% extends "base.html" %}

{% block title %}Nugget preview{% endblock %}

{% block panel_buttons %}
  <div class="row">
    <div class="col-md-12">
      <h2 class="mb-6 kb-action-brand">{{ corpus.annotation.name }}: nugget preview</h2>
    </div>
  </div>
{% endblock %}


{% block tabs %}
  <div class="row">
    <div class="col-md-7">
      <div id="nuggetViewWidget">
         <div id="loadingBlock" class="loading-elements center-block">
          <div id="loader"></div>
        </div>
      </div>
      <div class="row">
         <a type="button" onclick="$('#progressBlock').attr('style', 'display: inline-block; padding-top: 10px; ');" id="addNuggetToTheModel" class="btn btn-primary btn-lg" {% if not readonly%}href="{{ url_for('corpus.add_nugget_from_session', corpus_id=corpus_id) }}"{%endif%}  {% if readonly %} disabled {%endif%}><span class="glyphicon glyphicon-ok edit-sign"></span> Add to the corpus</a>
      </div>   
      <div class="row">
        <div id="progressBlock" style="padding-top: 10px; display: none;">
          <div id="progressMessage">Adding nugget to the corpus...</div>
          <div id="loadingBlock" class="loading-elements center-block">
            <div id="loader"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}


{% block custom_scripts %}
  <script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
  <script src="{{ url_for('static', filename='js/graphUtils.js') }}" type="text/javascript"></script>
  <script src="{{ url_for('static', filename='js/info_boxes/InfoBox.jsx') }}" type="text/babel"></script>
  <script src="{{ url_for('static', filename='js/graph_visualisation/visualiseGraph.js') }}" type="text/babel"></script>
  <script src="{{ url_for('static', filename='js/graph_visualisation/visualiseNugget.js') }}" type="text/babel"></script>
  <script src="{{ url_for('static', filename='js/nuggetViews.jsx') }}" type="text/babel"></script>
  <script type="text/babel">
    previewNugget(
      '{{corpus_id}}',
      '{{nugget_desc}}',
      '{{nugget_type}}',
      JSON.parse('{{ nugget_graph | safe }}'),
      JSON.parse('{{ nugget_meta_typing | safe }}'),
      JSON.parse('{{ nugget_ag_typing | safe }}'),
      JSON.parse('{{ nugget_template_rel | safe }}'));
  </script>
{% endblock %}

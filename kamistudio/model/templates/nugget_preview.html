{% extends "model_base.html" %}

{% block panel_buttons %}
  <div class="row">
    <div class="col-md-12">
      <h1 class="mb-6 model-action-brand">Nugget preview</h1>
    </div>
  </div>
{% endblock %}

{% block sidebar_items %}
<div class="sidebar">

  <div class="node-element-block">
      <h4 class="sidebar-block-name">Element</h4>
      <p class="faded sidebar-block-message" id="noSelectedElements">Click on an element to select</p>
      <p class="faded sidebar-block-message" id="edgeElementInfo" style="display: none;">Not available for edges</p>
      <div id="selectedElementInfo"></div>
  </div>
  <div class="node-info-block">
      <h4 class="sidebar-block-name">Meta-data</h4>
      <p class="faded sidebar-block-message" id="noSelectedNodes">Click on an element to select</p>
      <p class="faded sidebar-block-message" id="noMetaData" style="display: none;">No meta-data</p>
      <div id="selectedNodeInfo"></div>
  </div>
  <div class="node-ag-typing-block">
      <h4 class="sidebar-block-name">Action Graph Typing</h4>
      <p class="faded sidebar-block-message" id="noSelectedNodesToType">Click on a node to select</p>
      <p class="faded sidebar-block-message" id="noTyping" style="display: none;">Not typed by any node in the action graph</p>
      <p class="faded sidebar-block-message" id="edgeTyping" style="display: none;">Not available for edges</p>
      <div id="selectedNodeTyping"></div>
  </div>

</div>
<!--   <li class="graph-edit">
    <h3>Modify graph</h3>
    <hr class="mb-4">
  </li> -->
{% endblock %}

{% block interaction_form %}

<div class="col-md-12 order-md-1">
  


  <div class="row">
    <div class="col-md-12">
        <table class="table nugget-info-table">
          <tbody>
            <tr>
              <td class="nugget-info-table-header">Interaction type: </td>
              <td>
                {% if nugget_type == "mod" %}
                  modification
                {% else %}
                  binding
                {% endif %}
              </td>
            </tr>
            <tr>
              <td class="nugget-info-table-header">Description:</td>
              <td>{{ nugget_desc }}</td>
            </tr>
            <tr>
              <td class="nugget-info-table-header">Bimolecular rate:</td>
              <td>{{ nugget_rate }}</td>
            </tr>
            <tr>
              <td class="nugget-info-table-header no-border">Graph preview:</td>
              <td class="nugget-info-table-huge-cell"><svg id="nuggetSvg" width="660" height="300"></svg></td>
            </tr>
            <tr>
              <td class="nugget-info-table-header no-border">
                Entity identification:
              </td>
              <td class="nugget-info-table-huge-cell">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th scope="col">Node ID</th>
                      <th scope="col">Action Graph Node ID</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for node in nugget_nodes %}
                      <tr>
                        <td>{{ node }}</td>
                        {% if node in nugget_ag_typing_dict.keys() %}
                          <td>{{ nugget_ag_typing_dict[node] }}</td>
                        {% else %}
                          <td>NA</td>
                        {% endif %}
                      </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
        </table>
    </div>
  </div>
  
  <div class="row">
    <a type="button" id="addNuggetToTheModel" class="btn btn-primary btn-lg" href="{{ url_for('model.add_nugget_from_session', hierarchy_id=hierarchy_id) }}"><span class="glyphicon glyphicon-ok edit-sign"></span> Add to the model</a>    
  </div>

</div>

{% endblock %}
{% block customScripts %}
  <script type="text/javascript">
    visualiseNugget('{{ nugget_graph | safe }}', '{{ nugget_type }}', '{{ nugget_meta_typing | safe }}', '{{ nugget_ag_typing | safe }}', '{{ nugget_template_rel | safe }}');
  </script>
{% endblock %}
